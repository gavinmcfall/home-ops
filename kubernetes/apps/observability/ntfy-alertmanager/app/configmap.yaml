---
apiVersion: v1
kind: ConfigMap
metadata:
  name: ntfy-alertmanager-config
data:
  config.scfg: |
    base-url http://ntfy.observability.svc.cluster.local
    http-address :8080
    log-level info

    ntfy {
      topic k8s-alerts
      priority default
    }

    alertmanager {
      silence-duration 24h
      url http://alertmanager-operated.observability.svc.cluster.local:9093
    }

    labels {
      order severity

      label severity {
        critical {
          priority urgent
          tags rotating_light,skull
        }
        warning {
          priority high
          tags warning
        }
        info {
          priority default
          tags information_source
        }
      }
    }

    resolved {
      tags white_check_mark
    }
