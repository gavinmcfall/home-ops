---
# ExternalSecret to pull HuggingFace and worker tokens from 1Password.
# Adjust the secret names and keys in your secret store accordingly.
apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: llm-d
spec:
  secretStoreRef:
    kind: ClusterSecretStore
    name: onepassword-connect
  target:
    name: llm-d-secret
    template:
      engineVersion: v2
      data:
        # Hugging Face access token used for model downloads
        HF_TOKEN: "{{ .LLM_D_HF_TOKEN }}"
        # Token used by Windows/WSL2 workers to authenticate with the llmâ€‘d gateway.
        WORKER_TOKEN: "{{ .LLM_D_WORKER_TOKEN }}"
  # Pull all fields from the `llm-d` item in 1Password so they are available
  # via the {{ . ... }} expressions above
  dataFrom:
    - extract:
        key: llm-d
