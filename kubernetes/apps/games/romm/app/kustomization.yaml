---
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
resources:
  - ./externalsecret.yaml
  - ./helmrelease.yaml
  - ../../../../templates/gatus/external
  - ../../../../templates/volsync
patches:
  # Remove dataSourceRef since PVC already exists with data from migration
  - target:
      kind: PersistentVolumeClaim
      name: romm
    patch: |-
      - op: remove
        path: /spec/dataSourceRef
configMapGenerator:
- name: romm-config
  files:
    - ./config/config.yml
  options:
    disableNameSuffixHash: true
