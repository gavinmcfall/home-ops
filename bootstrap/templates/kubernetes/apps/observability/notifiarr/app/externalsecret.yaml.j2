---
# yaml-language-server: $schema=https://kubernetes-schemas.nerdz.cloud/external-secrets.io/externalsecret_v1.json
apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: notifiarr
spec:
  secretStoreRef:
    kind: ClusterSecretStore
    name: onepassword-connect
  target:
    name: notifiarr-secret
    template:
      engineVersion: v2
      data:
        # Notifiarr
        DN_API_KEY: "{{ .NOTIFARR_GLOBAL_API_KEY }}"
        # Plex
        DN_PLEX_URL: http://plex.entertainment:32400
        DN_PLEX_TOKEN: "{{ .PLEX_TOKEN }}"
        # Tautulli
        DN_TAUTULLI_URL: http://tautulli.entertainment
        DN_TAUTULLI_API_KEY: "{{ .TAUTULLI_API_KEY }}"
        DN_TAUTULLI_NAME: Tautulli
        # qBittorrent
        DN_QBIT_0_URL: http://qbittorrent.downloads
        DN_QBIT_0_NAME: qBittorrent
        # SABnzbd
        DN_SABNZBD_0_URL: http://sabnzbd.downloads
        DN_SABNZBD_0_API_KEY: "{{ .SABNZBD_API_KEY }}"
        DN_SABNZBD_0_NAME: SABnzbd
        # Sonarr (0=standard, 1=uhd, 2=foreign)
        DN_SONARR_0_URL: http://sonarr.downloads
        DN_SONARR_0_API_KEY: "{{ .SONARR_API_KEY }}"
        DN_SONARR_0_NAME: Sonarr
        DN_SONARR_1_URL: http://sonarr-uhd.downloads
        DN_SONARR_1_API_KEY: "{{ .SONARR_UHD_API_KEY }}"
        DN_SONARR_1_NAME: Sonarr UHD
        DN_SONARR_2_URL: http://sonarr-foreign.downloads
        DN_SONARR_2_API_KEY: "{{ .SONARR_FOREIGN_API_KEY }}"
        DN_SONARR_2_NAME: Sonarr Foreign
        # Radarr (0=standard, 1=uhd)
        DN_RADARR_0_URL: http://radarr.downloads
        DN_RADARR_0_API_KEY: "{{ .RADARR_API_KEY }}"
        DN_RADARR_0_NAME: Radarr
        DN_RADARR_1_URL: http://radarr-uhd.downloads
        DN_RADARR_1_API_KEY: "{{ .RADARR_UHD_API_KEY }}"
        DN_RADARR_1_NAME: Radarr UHD
        # Readarr
        DN_READARR_0_URL: http://readarr.downloads
        DN_READARR_0_API_KEY: "{{ .READARR__API_KEY }}"
        DN_READARR_0_NAME: Readarr
        # Prowlarr
        DN_PROWLARR_0_URL: http://prowlarr.downloads:9696
        DN_PROWLARR_0_API_KEY: "{{ .PROWLARR_API_KEY }}"
        DN_PROWLARR_0_NAME: Prowlarr
  dataFrom:
    - extract:
        key: notifarr
    - extract:
        key: plex
    - extract:
        key: tautulli
    - extract:
        key: qbittorrent
    - extract:
        key: sabnzbd
    - extract:
        key: sonarr
    - extract:
        key: sonarr-uhd
    - extract:
        key: sonarr-foreign
    - extract:
        key: radarr
    - extract:
        key: radarr-uhd
    - extract:
        key: readarr
    - extract:
        key: prowlarr
